<div class="card-container">
  <div class="card-row">
    <div class="card-group">
      <div class="card-title-box small-title">CONTRACTS</div>

      <div class="card">
        <dx-data-grid
          [dataSource]="contracts"
          [showBorders]="true"
          keyExpr="id"
          [editing]="{
            mode: 'popup',
            allowUpdating: true,
            allowAdding: true,
            allowDeleting: true
          }"
          (onRowInserting)="onAdd($event)"
          (onRowUpdating)="onEdit($event)"
          (onRowRemoving)="onDelete($event)"
        >
          <dxi-column
            dataField="title"
            caption="Contract Name"
            alignment="center"
          ></dxi-column>

          <dxi-column
            dataField="isActive"
            caption="Active"
            dataType="boolean"
            alignment="center"
          ></dxi-column>

          <dxi-column
            dataField="partnerIds"
            caption="Partners"
            [calculateCellValue]="getPartnerNames"
          ></dxi-column>

          <dxo-editing 
            mode="popup"
            [allowAdding]="true"
            [allowDeleting]="true"
            [allowUpdating]="true"
          >
            <dxo-popup
              title="Contract Details"
              [showTitle]="true"
              [width]="600"
              [height]="400"
            ></dxo-popup>

            <dxo-form>
              <dxi-item
                dataField="title"
                caption="Contract Name"
                [colSpan]="2"
              ></dxi-item>

              <dxi-item
                dataField="isActive"
                caption="Contract Active"
                [colSpan]="2"
              ></dxi-item>
             
<dxi-item
  dataField="partnerIds"
  [editorType]="'dxSelectBox'"
  [editorOptions]="{
    dataSource: partners,
    displayExpr: 'name',
    valueExpr: 'id',
    searchEnabled: true,
    showClearButton: true,
    placeholder: 'Select a partner'
  }"
  caption="Select Partner"
  [colSpan]="2"
/>

            </dxo-form>
          </dxo-editing>
        </dx-data-grid>
      </div>
    </div>
  </div>
</div>